<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
</head>

<body>
    <input type="file" id="file" multiple>
    <button id="submit">提交文件</button>


    <script>
        const f = document.getElementById("file")
        const btn = document.getElementById("submit")
        let rd = new FileReader()
        let index = 0
        let fileBase64Arr = []

        function files2Base64() {
            console.log("2")
            if (index >= f.files.length) {
                console.log("over...")
                return
            }
            console.log(index, "loading...")
            rd.readAsDataURL(f.files[index])
            rd.onload = (e) => {
                let bin = e.target.result
                console.log(bin)
                fileBase64Arr[index] = bin
                index = index + 1
                files2Base64()
            }

        }

        f.onchange = () => {
            console.log("change!")
            files2Base64()
        }

        btn.onclick = () => {
            files2Base64()

        }


    </script>
</body>

</html>